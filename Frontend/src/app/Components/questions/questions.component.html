<div class="container" *ngIf="!filter">
  <div class="card mt-3">
    <div class="row p-4 pb-0">
      <div class="col-md-10">
        <h4>{{ "question.title" | translate }}</h4>
      </div>
      <div class="col-md-2 text-end">
        <button class="btn btn-filter mb-2" (click)="Filter(true)">
          {{ "question.filter" | translate }}
        </button>
      </div>
      <hr />
    </div>
    <form #questionForm="ngForm" (ngSubmit)="submit(questionForm)">
      <div class="row p-4 pt-0">
        <div class="col-md-6 col-sm-6 my-2">
          <label for="Deed Category">{{ "question.label1" | translate }}</label>
          <select
            class="form-control"
            [(ngModel)]="deedCategoryId"
            name="deedCategory"
            id="deedCategory"
            (change)="getDeedType()"
          >
            <option class="dropdown-item" disabled selected value="undefined">
              --{{ "question.option1" | translate }}--
            </option>
            <option
              *ngFor="let item of deedCategory; let i = index"
              [value]="item.id"
            >
              {{ i + 1 + "." }}
              {{
                translation.currentLang == "en"
                  ? item.deedCategoryNameEn
                  : item.deedCategoryNameHi
              }}
            </option>
          </select>
        </div>
        <div class="col-md-6 col-sm-6 my-2">
          <label for="Deed Type">{{ "question.label2" | translate }}</label>
          <select
            class="form-control"
            [(ngModel)]="deedTypeId"
            (change)="getInstrument()"
            name="deedType"
            id="deedType"
          >
            <option class="dropdown-item" disabled selected value="undefined">
              --{{ "question.option2" | translate }}--
            </option>
            <option
              [value]="item.id"
              *ngFor="let item of deedType; let i = index"
            >
              {{ i + 1 + "." }}
              {{
                translation.currentLang == "en"
                  ? item.deedTypeNameEn
                  : item.deedTypeNameHi
              }}
            </option>
          </select>
        </div>
        <div class="col-md-12 col-sm-12 my-2">
          <label for="Instrument">{{ "question.label3" | translate }}</label>
          <select
            class="form-control"
            [(ngModel)]="instrumentId"
            (change)="getRoles()"
            name="instrument"
            id="instrument"
          >
            <option disabled selected value="undefined">
              --{{ "question.option3" | translate }}--
            </option>
            <option
              *ngFor="let item of instrument; let i = index"
              [value]="item.id"
              [disabled]="item.isAssisted == null"
            >
              {{ i + 1 + "." }}
              {{
                translation.currentLang == "en"
                  ? item.instrumentNameEn
                  : item.instrumentNameHi
              }}
            </option>
          </select>
        </div>
        <div class="col-md-6 col-sm-6 my-2">
          <label for="Instrument">{{ "question.label5" | translate }}</label>
          <input
            type="text"
            class="form-control"
            disabled
            [(ngModel)]="isAssisted"
            name="isAssisted"
          />
        </div>
        <div class="col-md-6 col-sm-6 my-2">
          <label for="Party Role">{{ "question.label4" | translate }}</label>
          <select class="form-control" ngModel name="partyRole" id="partyRole">
            <option disabled selected value="">
              --{{ "question.option4" | translate }}--
            </option>
            <option
              [value]="item.partyTypeId"
              *ngFor="let item of rolesData; let i = index"
            >
              {{ i + 1 + "." }}
              {{
                translation.currentLang == "en"
                  ? item.partyTypeNameEn
                  : item.partyTypeNameHi
              }}
            </option>
          </select>
        </div>
        <div class="col-md-6 col-sm-6 my-2">
          <div class="form-group">
            <label for="Question in English">{{
              "question.questionEnglish" | translate
            }}</label>
            <textarea
              class="form-control"
              id="exampleFormControlTextarea1"
              ngModel
              name="questionEn"
              placeholder="Enter Question in English"
              rows="3"
            ></textarea>
          </div>
        </div>
        <div class="col-md-6 col-sm-6 my-2">
          <div class="form-group">
            <label for="Question in Hindi">{{
              "question.questionHindi" | translate
            }}</label>
            <textarea
              class="form-control"
              id="exampleFormControlTextarea1"
              ngModel
              name="questionHi"
              placeholder="Enter Question in Hindi"
              rows="3"
            ></textarea>
          </div>
        </div>
        <div class="col-md-12 my-3">
          <div role="group" aria-label="Basic example">
            <button
              type="submit"
              [disabled]="!isAssisted"
              class="btn btn-submit mt-2"
            >
              {{ "question.Submit" | translate }}
            </button>
            <button
              type="reset"
              (click)="resetForm()"
              class="btn btn-reset mt-2"
            >
              {{ "question.Reset" | translate }}
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
  <div class="card my-3">
    <div class="row p-3">
      <div class="col-md-12 my-3 text-center">
        <h4>{{ "question.questionList" | translate }}</h4>
        <hr>
      </div>
      <div class="col-md-12 buttons">
        <table class="table table-bordered border-dark">
          <thead class="tableheader">
            <tr>
              <th scope="col" style="width: 25px" valign="top">
                {{ "question.sno" | translate }}
              </th>
              <th scope="col" style="width: 350px" valign="top">
                {{ "question.InstrumentName" | translate }}
              </th>
              <th scope="col" valign="top">{{ "question.Role" | translate }}</th>
              <th scope="col" valign="top">{{ "question.VKYCType" | translate }}</th>
              <th scope="col" valign="top">{{ "question.Questions" | translate }}</th>
              <th scope="col" valign="top">{{ "question.Action" | translate }}</th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="
                let item of questionList
                  | paginate
                    : { itemsPerPage: limit, currentPage: page };
                let i = index
              "
            >
            <th>{{(page*limit + i + 1)-limit}}.</th>
              <td>
                {{
                  translation.currentLang == "en"
                    ? item.instrument.instrumentNameEn
                    : item.instrument.instrumentNameHi
                }}
              </td>
              <td>
                {{
                  translation.currentLang == "en"
                    ? item.partyRole.partyTypeNameEn
                    : item.partyRole.partyTypeNameHi
                }}
              </td>
              <td>{{ item.isAssisted == 0 ? "Non-Assisted" : "Assisted" }}</td>
              <td>
                {{
                  translation.currentLang == "en"
                    ? item.questionEn
                    : item.questionHi
                }}
              </td>
              <td>
                <i
                  class="fas fa-edit"
                  (click)="editQuestion(item._id)"
                  ngbTooltip="Edit Question"
                  placement="top"
                ></i>
                &nbsp;&nbsp;
                <i
                  class="fa-regular fa-square fa-md"
                  *ngIf="item.is_active == false"
                  (click)="enableQuestion(item._id)"
                  ngbTooltip="Enable Question"
                  placement="top"
                ></i>
                <i
                  class="fa-regular fa-square-check fa-md"
                  *ngIf="item.is_active == true"
                  (click)="disableQuestion(item._id)"
                  ngbTooltip="Disable Question"
                  placement="top"
                ></i>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="card-footer text-center">
      <pagination-controls
        (pageChange)="page = $event"
      ></pagination-controls>
    </div>
  </div>
</div>
<div class="container" *ngIf="filter">
  <div class="card mt-3">
    <div class="row p-4 pb-0">
      <div class="col-md-10">
        <h4>{{ "question.search" | translate }}</h4>
      </div>
      <div class="col-md-2 text-end">
        <button class="btn btn-filter mb-2" (click)="Filter(false)">
          {{ "question.back" | translate }}
        </button>
      </div>
      <hr />
    </div>
    <form #filterForm="ngForm" (ngSubmit)="filterData(filterForm)">
      <div class="row p-4 pt-0">
        <div class="col-md-6 col-sm-6 my-2">
          <label for="Deed Category">{{ "question.label1" | translate }}</label>
          <select
            class="form-control"
            [(ngModel)]="deedCategoryId"
            name="deedCategory"
            id="deedCategory"
            (change)="getDeedType()"
          >
            <option class="dropdown-item" disabled selected value="undefined">
              --{{ "question.option1" | translate }}--
            </option>
            <option
              *ngFor="let item of deedCategory; let i = index"
              [value]="item.id"
            >
              {{ i + 1 + "." }}
              {{
                translation.currentLang == "en"
                  ? item.deedCategoryNameEn
                  : item.deedCategoryNameHi
              }}
            </option>
          </select>
        </div>
        <div class="col-md-6 col-sm-6 my-2">
          <label for="Deed Type">{{ "question.label2" | translate }}</label>
          <select
            class="form-control"
            [(ngModel)]="deedTypeId"
            (change)="getInstrument()"
            name="deedType"
            id="deedType"
          >
            <option class="dropdown-item" disabled selected value="undefined">
              --{{ "question.option2" | translate }}--
            </option>
            <option
              [value]="item.id"
              *ngFor="let item of deedType; let i = index"
            >
              {{ i + 1 + "." }}
              {{
                translation.currentLang == "en"
                  ? item.deedTypeNameEn
                  : item.deedTypeNameHi
              }}
            </option>
          </select>
        </div>
        <div class="col-md-6 col-sm-6 my-2">
          <label for="Instrument">{{ "question.label3" | translate }}</label>
          <select
            class="form-control"
            [(ngModel)]="instrumentId"
            (change)="getRoles()"
            name="instrument"
            id="instrument"
          >
            <option disabled selected value="undefined">
              --{{ "question.option3" | translate }}--
            </option>
            <option
              *ngFor="let item of instrument; let i = index"
              [value]="item.id"
              [disabled]="item.isAssisted == null"
            >
              {{ i + 1 + "." }}
              {{
                translation.currentLang == "en"
                  ? item.instrumentNameEn
                  : item.instrumentNameHi
              }}
            </option>
          </select>
        </div>
        <div class="col-md-6 col-sm-6 my-2">
          <label for="Party Role">{{ "question.label4" | translate }}</label>
          <select class="form-control" ngModel name="partyRole" id="partyRole">
            <option disabled selected value="">
              --{{ "question.option4" | translate }}--
            </option>
            <option
              [value]="item.partyTypeId"
              *ngFor="let item of rolesData; let i = index"
            >
              {{ i + 1 + "." }}
              {{
                translation.currentLang == "en"
                  ? item.partyTypeNameEn
                  : item.partyTypeNameHi
              }}
            </option>
          </select>
        </div>
        <div class="col-md-12 my-3">
          <div role="group" aria-label="Basic example">
            <button type="submit" class="btn btn-submit mt-2">
              {{ "question.Search" | translate }}
            </button>
            <button
              type="reset"
              (click)="resetForm()"
              class="btn btn-reset mt-2"
            >
              {{ "question.Reset" | translate }}
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
  <div class="card my-3">
    <div class="row p-4">
      <div class="col-md-12 my-3 text-center">
        <h4>{{ "question.searchList" | translate }}</h4>
        <hr />
      </div>
      <div class="col-md-12">
        <table class="table table-bordered border-dark">
          <thead class="tableheader">
            <tr>
              <th scope="col" style="width: 25px" valign="top">
                {{ "question.sno" | translate }}
              </th>
              <th scope="col" style="width: 350px" valign="top">
                {{ "question.InstrumentName" | translate }}
              </th>
              <th scope="col" valign="top">{{ "question.Role" | translate }}</th>
              <th scope="col" valign="top">{{ "question.VKYCType" | translate }}</th>
              <th scope="col" valign="top">{{ "question.Questions" | translate }}</th>
              <th scope="col" valign="top">{{ "question.Action" | translate }}</th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="
                let item of questionList
                  | paginate
                    : { itemsPerPage: limit, currentPage: page,  totalItems: count };
                let i = index
              "
            >
              <th>{{(page*limit + i + 1)-limit}}.</th>
              <td>
                {{
                  translation.currentLang == "en"
                    ? item.instrument.instrumentNameEn
                    : item.instrument.instrumentNameHi
                }}
              </td>
              <td>
                {{
                  translation.currentLang == "en"
                    ? item.partyRole.partyTypeNameEn
                    : item.partyRole.partyTypeNameHi
                }}
              </td>
              <td>{{ item.isAssisted == 0 ? "Non-Assisted" : "Assisted" }}</td>
              <td>
                {{
                  translation.currentLang == "en"
                    ? item.questionEn
                    : item.questionHi
                }}
              </td>
              <td>
                <i class="fas fa-edit" (click)="editQuestion(item._id)"></i>
                &nbsp;&nbsp;
                <i
                  class="fa-regular fa-square fa-md"
                  *ngIf="item.is_active == false"
                  (click)="enableQuestion(item._id)"
                ></i>
                <i
                  class="fa-regular fa-square-check fa-md"
                  *ngIf="item.is_active == true"
                  (click)="disableQuestion(item._id)"
                ></i>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="card-footer text-center">
      <pagination-controls
        (pageChange)="page = $event"
      ></pagination-controls>
    </div>
  </div>
</div>
